<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="ui.fx.laporan.LaporanController"
      spacing="15"
      style="-fx-padding: 20;">

    <Label text="Laporan &amp; Analisis"
           style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

    <!-- Filter Section -->
    <VBox spacing="10" style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-color: #f9f9f9;"
          VBox.vgrow="NEVER">
        <padding>
            <Insets top="10" right="10" bottom="10" left="10"/>
        </padding>

        <Label text="Filter Laporan"
               style="-fx-font-size: 12px; -fx-font-weight: bold;"/>

        <HBox spacing="10">
            <VBox spacing="5">
                <Label text="Tipe Laporan"/>
                <ComboBox fx:id="cbTipeLaporan" prefWidth="150">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Semua"/>
                            <String fx:value="Stok Barang"/>
                            <String fx:value="Transaksi"/>
                            <String fx:value="Supplier"/>
                        </FXCollections>
                    </items>
                </ComboBox>
            </VBox>

            <VBox spacing="5">
                <Label text="Dari Tanggal"/>
                <DatePicker fx:id="dpFromDate"/>
            </VBox>

            <VBox spacing="5">
                <Label text="Sampai Tanggal"/>
                <DatePicker fx:id="dpToDate"/>
            </VBox>

            <VBox spacing="5" prefWidth="100">
                <Label text=" "/>
                <Button text="Filter" onAction="#handleFilter" style="-fx-padding: 8px 20px;"/>
            </VBox>
        </HBox>
    </VBox>

    <!-- Action Buttons -->
    <HBox spacing="10">
        <Button text="Ekspor ke Excel" onAction="#handleExportExcel" style="-fx-padding: 8px 15px;"/>
        <Button text="Ekspor ke PDF" onAction="#handleExportPDF" style="-fx-padding: 8px 15px;"/>
        <Button text="Cetak" onAction="#handlePrint" style="-fx-padding: 8px 15px;"/>
        <Button text="Refresh" onAction="#handleRefresh" style="-fx-padding: 8px 15px;"/>
    </HBox>

    <Separator/>

    <!-- Report Summary -->
    <HBox spacing="20">
        <VBox style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-color: #f9f9f9;"
              prefWidth="140">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <Label text="Total Barang"
                   style="-fx-text-fill: #666; -fx-font-size: 11px;"/>
            <Label fx:id="lblTotalBarangReport" text="0"
                   style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
        </VBox>

        <VBox style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-color: #f9f9f9;"
              prefWidth="140">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <Label text="Total Nilai Stok"
                   style="-fx-text-fill: #666; -fx-font-size: 11px;"/>
            <Label fx:id="lblTotalNilaiStok" text="Rp 0"
                   style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
        </VBox>

        <VBox style="-fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-color: #f9f9f9;"
              prefWidth="140">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <Label text="Transaksi Periode"
                   style="-fx-text-fill: #666; -fx-font-size: 11px;"/>
            <Label fx:id="lblTotalTransaksiReport" text="0"
                   style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
        </VBox>
    </HBox>

    <!-- Report Table -->
    <Label text="Detail Laporan"
           style="-fx-font-size: 12px; -fx-font-weight: bold;"/>

    <TableView fx:id="tableReport" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="colReportNo"   text="No"       prefWidth="50"/>
            <TableColumn fx:id="colReportItem" text="Item"     prefWidth="150"/>
            <TableColumn fx:id="colReportQty"  text="Qty/Val"  prefWidth="100"/>
            <TableColumn fx:id="colReportDate" text="Tanggal"  prefWidth="120"/>
            <TableColumn fx:id="colReportNote" text="Keterangan" prefWidth="200"/>
        </columns>
    </TableView>

    <Label fx:id="lblReportStatus" textFill="gray" style="-fx-font-size: 11px;"/>

</VBox>
